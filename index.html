<!DOCTYPE html>
<html lang="km">
<head>


<script type="module">
  // Import the functions you need from the SDKs you need
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.8.0/firebase-app.js";
  // TODO: Add SDKs for Firebase products that you want to use
  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration
  const firebaseConfig = {
    apiKey: "AIzaSyCd-FGrbCelEUN370I0wmzscnLjYxxX200",
    authDomain: "bible-group-2026.firebaseapp.com",
    projectId: "bible-group-2026",
    storageBucket: "bible-group-2026.firebasestorage.app",
    messagingSenderId: "639986298395",
    appId: "1:639986298395:web:d9d92344e516c4f5e112be"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
</script>


  
<meta charset="UTF-8">
<title>Sonoko Bible group Website Home page</title>
<link rel="stylesheet" href="css/style.css">
</head>
<body>



<!-- Menu Bar -->
<?php include 'header.html'; ?>
<header style="background:#6a1b9a;color:#fff;padding:15px 30px;border-radius:8px;">
    <nav style="max-width:1000px;margin:auto;display:flex;justify-content:space-between;align-items:center;">
      <div style="font-weight:bold;font-size:18px;">The 5 brothers |Small Group 2026|</div>
      <div>
        <a href="index.html" style="color:#fff;text-decoration:none;margin:0 10px;">🏠 Home</a>
        <a href="calendar.html" style="color:#fff;text-decoration:none;margin:0 10px;">Ice breaker 5minutes</a>
        <a href="romans.html" style="color:#fff;text-decoration:none;margin:0 10px;">📖 Bible</a>
        <a href="meeting.html" style="color:#fff;text-decoration:none;margin:0 10px;">🙏 Meeting Notes</a>
        <a href="progress.html" style="color:#fff;text-decoration:none;margin:0 10px;">✅ Weekly Progress</a>
      </div>
    </nav>
  </header>

<section id="home" style="
  max-width:950px;
  margin:40px auto;
  padding:40px;
  background:#fff8f0;
  border-radius:12px;
  box-shadow:0 10px 25px rgba(0,0,0,0.08);
  font-family:'Khmer OS Siemreap', 'Segoe UI', Arial, sans-serif;
  text-align:center;
">
  <h1 style="color:#6a1b9a;">សូមស្វាគមន៍ មកកាន់ ក្រុមអ្នករៀនចប់ ||Small Group 2026||</h1>
  <p style="font-size:18px;color:#555;margin-top:15px;">
    ក្រុមចែករំលែកព្រះគម្ពីរនិងការអធិស្ឋានជាមួយគ្នា រៀងរាល់សប្ដាហ៍​ របស់ក្រុម​ អ្នករៀនចប់។ 🙏
  </p>

  <!-- Bible Verse Rotator -->

<section>
  <div id="bibleVerse" style="margin-top:25px;font-size:20px;color:#2c3e50;font-weight:bold;line-height:2.6;">
    Loading verse...
  </div>
</section>

<script>
// Romans Chapter 4 (Khmer) – Verse Rotator
const verses = [
  "រ៉ូម 4:1 – បើ​ដូច្នេះ យើង​នឹង​ថា លោក​អ័ប្រាហាំ ជា​ឰយុកោ​យើង បាន​អ្វី​ខ្លះ ខាង​ឯ​សាច់​ឈាម?",
  "រ៉ូម 4:2 – បើ​អ័ប្រាហាំ បាន​រាប់​ជា​សុចរិត​ដោយ​ការ​ប្រព្រឹត្ត នោះ​លោក​អាច​អួត​ខ្លួន​បាន តែ​មិន​មែន​ចំពោះ​ព្រះ​ទេ។",
  "រ៉ូម 4:3 – «អ័ប្រាហាំ​បាន​ជឿ​ដល់​ព្រះ ហើយ​សេចក្ដី​ជំនឿ​នោះ បាន​រាប់​ជា​សេចក្ដី​សុចរិត​ដល់​លោក»",
  "រ៉ូម 4:4 – រង្វាន់​មិន​រាប់​ជា​គុណ​ទេ ប៉ុន្តែ​ជា​ថ្លៃ​ឈ្នួល។",
  "រ៉ូម 4:5 – អ្នក​ដែល​ជឿ​ដល់​ព្រះ ដែល​ប្រោស​មនុស្ស​ទមិលល្មើស​ឲ្យ​បាន​សុចរិត សេចក្ដី​ជំនឿ​នោះ ត្រូវ​រាប់​ជា​សុចរិត។",
  "រ៉ូម 4:6 – ដាវីឌ​និយាយ​អំពី​មនុស្ស​ដែល​ព្រះ​រាប់​ជា​សុចរិត ដោយ​គ្មាន​ការ​ប្រព្រឹត្ត។",
  "រ៉ូម 4:7 – «មាន​ពរ​ហើយ អ្នក​ណា​ដែល​អំពើ​បាប​បាន​អត់ទោស»",
  "រ៉ូម 4:8 – «មាន​ពរ​ហើយ មនុស្ស​ដែល​ព្រះ​មិន​រាប់​ជា​មាន​បាប»",
  "រ៉ូម 4:9 – ពរ​នេះ មិន​សម្រាប់​តែ​ពួក​កាត់​ស្បែក​ទេ ប៉ុន្តែ​សម្រាប់​អ្នក​ជឿ​ទាំងអស់។",
  "រ៉ូម 4:10 – សេចក្ដី​សុចរិត ត្រូវ​រាប់​ដល់​អ័ប្រាហាំ មុន​ពេល​កាត់​ស្បែក។",
  "រ៉ូម 4:11 – ការ​កាត់​ស្បែក ជា​ត្រា​នៃ​សេចក្ដី​ជំនឿ។",
  "រ៉ូម 4:12 – អ័ប្រាហាំ ជា​ឪពុក​នៃ​អស់​អ្នក​ដែល​ជឿ។",
  "រ៉ូម 4:13 – សេចក្ដី​សន្យា មក​ដោយ​សេចក្ដី​ជំនឿ មិន​មែន​ដោយ​ក្រិត្យ​វិន័យ។",
  "រ៉ូម 4:14 – បើ​អាង​ក្រិត្យ​វិន័យ សេចក្ដី​ជំនឿ​ក្លាយ​ជា​ឥត​ប្រយោជន៍។",
  "រ៉ូម 4:15 – ក្រិត្យ​វិន័យ បង្កើត​សេចក្ដី​ក្រោធ។",
  "រ៉ូម 4:16 – សេចក្ដី​សន្យា មក​ដោយ​ព្រះគុណ តាម​រយៈ​សេចក្ដី​ជំនឿ។",
  "រ៉ូម 4:17 – អ័ប្រាហាំ ជា​ឪពុក​នៃ​សាសន៍​ជា​ច្រើន។",
  "រ៉ូម 4:18 – លោក​ជឿ ដោយ​សង្ឃឹម ទោះ​អស់​សង្ឃឹម​ក៏​ដោយ។",
  "រ៉ូម 4:19 – លោក​មិន​ខ្សោយ​ក្នុង​សេចក្ដី​ជំនឿ ទោះ​អាយុ​ចាស់​ក៏​ដោយ។",
  "រ៉ូម 4:20 – លោក​មិន​សង្ស័យ​សេចក្ដី​សន្យា​របស់​ព្រះ។",
  "រ៉ូម 4:21 – លោក​ជឿ​ថា ព្រះ​អាច​ធ្វើ​ឲ្យ​សម្រេច​បាន។",
  "រ៉ូម 4:22 – សេចក្ដី​ជំនឿ ត្រូវ​រាប់​ជា​សេចក្ដី​សុចរិត។",
  "រ៉ូម 4:23 – ពាក្យ​នេះ មិន​សម្រាប់​អ័ប្រាហាំ​តែ​ម្នាក់​ទេ។",
  "រ៉ូម 4:24 – ត្រូវ​រាប់​ដល់​យើង ដែល​ជឿ​ដល់​ព្រះយេស៊ូវ។",
  "រ៉ូម 4:25 – ព្រះយេស៊ូវ ត្រូវ​ប្រគល់​ដោយ​សារ​អំពើ​បាប​យើង ហើយ​បាន​រស់​ឡើង​វិញ ដើម្បី​ឲ្យ​យើង​បាន​សុចរិត។"
];

let verseIndex = 0;
function showVerse() {
  document.getElementById("bibleVerse").textContent = verses[verseIndex];
  verseIndex = (verseIndex + 1) % verses.length;
}
showVerse();
setInterval(showVerse, 8000); // ប្ដូរ រៀងរាល់ 8 វិនាទី
</script>
<div id="bibleVerse" style="
  margin-top:25px;
  font-size:50px;
  color:#2c3e50;
  font-weight:500;
  line-height:1.8;
  min-height:0px;
">
</div>

<!--Calandar-->
<section id="calendar" style="max-width:1000px;margin:40px auto;padding:30px;font-family:'Khmer OS Siemreap','Segoe UI',Arial,sans-serif;background:#faf7ff;border-radius:12px;box-shadow:0 8px 20px rgba(0,0,0,0.06);">
<h1 style="text-align:center;color:#4a2c82;">📅 កាលវិភាគ Romans Small Group (16 សប្ដាហ៍)</h1>
<p style="text-align:center">🗓 រៀងរាល់ថ្ងៃអង្គារ | ⏰ 6:30 PM <br>▶️ ចាប់ផ្តើម៖ <b>03 កុម្ភៈ 2026</b></p>

<table style="width:100%;border-collapse:collapse;margin-top:20px;">
<thead style="background:#e6ddff;">
<tr>
<th>សប្តាហ៍</th>
<th>កាលបរិច្ឆេទ</th>
<th>Romans</th>
<th>អ្នកដឹកនាំ</th>
<th>Open Prayer</th>
<th>Worship</th>
<th>Close Prayer</th>
</tr>
</thead>
<tbody>
<!-- February -->
<tr><td>1</td><td>06 Feb</td><td>Romans 4</td><td><b>Lai</b></td><td>Bonthoeurn</td><td>David</td><td>Vichhai</td></tr>
<tr><td>2</td><td>13 Feb</td><td>Romans 5</td><td><b>Bonthoeurn</b></td><td>David</td><td>Vichhai</td><td>Lai</td></tr>
<tr><td>3</td><td>20 Feb</td><td>Romans 6</td><td><b>David</b></td><td>Vichhai</td><td>Lai</td><td>Bonthoeurn</td></tr>
<tr style="background:#ffe5e5;color:#a71d2a;font-weight:bold;"><td>4</td><td>24 Feb</td><td>-</td><td colspan="5">❌ សប្ដាហ៍ចុងខែ – មិនមានការជួប</td></tr>

<!-- March -->
<tr><td>5</td><td>03 Mar</td><td>Romans 7</td><td><b>Vichhai</b></td><td>Lai</td><td>Bonthoeurn</td><td>David</td></tr>
<tr><td>6</td><td>10 Mar</td><td>Romans 8</td><td><b>Lai</b></td><td>Bonthoeurn</td><td>David</td><td>Vichhai</td></tr>
<tr><td>7</td><td>17 Mar</td><td>Romans 9</td><td><b>Bonthoeurn</b></td><td>David</td><td>Vichhai</td><td>Lai</td></tr>
<tr><td>8</td><td>24 Mar</td><td>Romans 10</td><td><b>David</b></td><td>Vichhai</td><td>Lai</td><td>Bonthoeurn</td></tr>
<tr style="background:#ffe5e5;color:#a71d2a;font-weight:bold;"><td>9</td><td>31 Mar</td><td>-</td><td colspan="5">❌ សប្ដាហ៍ចុងខែ – មិនមានការជួប</td></tr>

<!-- April -->
<tr><td>10</td><td>07 Apr</td><td>Romans 11</td><td><b>Vichhai</b></td><td>Lai</td><td>Bonthoeurn</td><td>David</td></tr>
<tr style="background:#ffe5e5;color:#a71d2a;font-weight:bold;"><td>11</td><td>14 Apr</td><td>-</td><td colspan="5">❌ Khmer New Year – មិនមានការជួប</td></tr>
<tr><td>12</td><td>21 Apr</td><td>Romans 12</td><td><b>Lai</b></td><td>Bonthoeurn</td><td>David</td><td>Vichhai</td></tr>
<tr style="background:#ffe5e5;color:#a71d2a;font-weight:bold;"><td>13</td><td>28 Apr</td><td>-</td><td colspan="5">❌ សប្ដាហ៍ចុងខែ – មិនមានការជួប</td></tr>

<!-- May -->
<tr><td>14</td><td>05 May</td><td>Romans 13</td><td><b>Bonthoeurn</b></td><td>David</td><td>Vichhai</td><td>Lai</td></tr>
<tr><td>15</td><td>12 May</td><td>Romans 14</td><td><b>David</b></td><td>Vichhai</td><td>Lai</td><td>Bonthoeurn</td></tr>
<tr><td>16</td><td>19 May</td><td>Romans 15</td><td><b>Vichhai</b></td><td>Lai</td><td>Bonthoeurn</td><td>David</td></tr>
<tr style="background:#ffe5e5;color:#a71d2a;font-weight:bold;"><td>17</td><td>26 May</td><td>-</td><td colspan="5">❌ សប្ដាហ៍ចុងខែ – មិនមានការជួប</td></tr>

<!-- June -->
<tr><td>18</td><td>02 Jun</td><td>Romans 16</td><td><b>Lai</b></td><td>Bonthoeurn</td><td>David</td><td>Vichhai</td></tr>
</tbody>
</table>

<p style="margin-top:20px;text-align:center;color:#555">
🔁 Rotation: Lai → Bonthoeurn → David → Vichhai <br>
⛔ Week 4 នៃខែ និង Khmer New Year → មិនមានការជួប
</p>
</section>

<!--END Calendar-->
  
<!-- Users list style -->
<section style="max-width:900px;margin:40px auto;">
  <h2 style="text-align:center;">👥 សមាជិកក្រុមតូច​ អ្នករៀនចប់</h2>

  <button onclick="showAddMember()" style="
    margin-bottom:15px;
    background:#6a1b9a;
    color:#fff;
    border:none;
    padding:10px 16px;
    border-radius:6px;
    cursor:pointer;
  ">➕ Add Member</button>

  <table style="width:100%;border-collapse:collapse;box-shadow:0 8px 20px rgba(0,0,0,.08)">
    <thead style="background:#6a1b9a;color:white;">
      <tr>
        <th>#</th>
        <th>Name</th>
        <th>Role</th>
        <th>Prayer</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody id="memberTable"></tbody>
  </table>
</section>

<div id="prayerModal" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5)">
  <div style="background:white;padding:20px;border-radius:10px;max-width:500px;margin:80px auto;">
    <h3 id="prayerTitle">🙏 Prayer Requests</h3>

    <textarea id="prayer1" placeholder="Prayer 1"></textarea>
    <textarea id="prayer2" placeholder="Prayer 2"></textarea>
    <textarea id="prayer3" placeholder="Prayer 3"></textarea>
    <textarea id="prayer4" placeholder="Prayer 4"></textarea>
    <textarea id="prayer5" placeholder="Prayer 5"></textarea>
    <textarea id="prayer6" placeholder="Prayer 6"></textarea>
    <textarea id="prayer7" placeholder="Prayer 7"></textarea>

    <br>
    <button onclick="savePrayer()" style="background:#6a1b9a;color:#fff;padding:8px 14px;border:none;border-radius:6px;">💾 Save</button>
    <button onclick="closePrayer()">Close</button>
    
  </div>
</div>

  
<div id="memberModal" style="display:none;position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.5)">
  <div style="background:white;padding:20px;border-radius:10px;max-width:400px;margin:100px auto;">
    <h3>Add Team Member</h3>
    <input id="memberName" placeholder="Member name" style="width:95%;padding:8px;margin-bottom:10px;">
    <select id="memberRole" style="width:100%;padding:8px;">
      <option value="Member">Member</option>
      <option value="Leader">Leader</option>
    </select>
    <br><br>
    <button onclick="saveMember()" style="background:#6a1b9a;color:#fff;padding:8px 14px;border:none;border-radius:6px;">Save</button>
    <button onclick="closeModal()">Cancel</button>
  </div>
</div>

<!--test-->
<script type="module">
import {
  getFirestore, collection, addDoc, onSnapshot,
  doc, updateDoc, deleteDoc, getDoc,
  query, orderBy, getDocs
} from "https://www.gstatic.com/firebasejs/12.8.0/firebase-firestore.js";

const db = getFirestore();

let currentMemberId = "";
let editMode = false;
  
//new test

import { getAuth, signInAnonymously } 
from "https://www.gstatic.com/firebasejs/12.8.0/firebase-auth.js";

const auth = getAuth();

signInAnonymously(auth)
  .then(() => {
    console.log("✅ Authenticated anonymously");
  })
  .catch(err => {
    console.error("Auth error", err);
  });

  
//new test



// 🔄 Load members ordered
const q = query(collection(db,"members"), orderBy("order"));

onSnapshot(q, snap=>{
  memberTable.innerHTML="";
  let i=1;
  snap.forEach(d=>{
    const m=d.data();
    memberTable.innerHTML+=`
      <tr>
        <td>${i++}</td>
        <td>${m.name}</td>
        <td>${m.role}</td>
        <td>
          <button onclick="openPrayer('${d.id}','${m.name}')">🙏</button>
        </td>
        <td>
          <button onclick="editMember('${d.id}','${m.name}','${m.role}')">✏️</button>
          <button onclick="deleteMember('${d.id}')">❌</button>
        </td>
      </tr>`;
  });
});
  

// ➕ Add / ✏️ Update member
window.saveMember = async()=>{
  const name = memberName.value.trim();
  if(!name) return alert("Enter name");

  // 🔍 check duplicate name
  const snap = await getDocs(collection(db,"members"));
  let duplicate = false;

  snap.forEach(d=>{
    const m = d.data();
    if(
      m.name.toLowerCase() === name.toLowerCase() &&
      d.id !== currentMemberId   // allow same when editing itself
    ){
      duplicate = true;
    }
  });

  if(duplicate){
    alert("❌ This name already exists");
    return;
  }

  if(editMode){
    // ✏️ Update member
    await updateDoc(doc(db,"members",currentMemberId),{
      name,
      role: memberRole.value
    });
  }else{
    // ➕ Add new member (to bottom)
    let maxOrder = 0;
    snap.forEach(d=>{
      maxOrder = Math.max(maxOrder, d.data().order || 0);
    });

    await addDoc(collection(db,"members"),{
      name,
      role: memberRole.value,
      order: maxOrder + 1,
      prayers: [],
      createdAt: new Date()
    });
  }

  closeModal();
};


// ✏️ Edit member
window.editMember = (id,name,role)=>{
  editMode = true;
  currentMemberId = id;
  memberName.value = name;
  memberRole.value = role;
  memberModal.style.display = "block";
};

// ❌ Delete member
window.deleteMember = async(id)=>{
  if(confirm("Delete member?")){
    await deleteDoc(doc(db,"members",id));
  }
};

// 🙏 Open prayer
window.openPrayer = async(id,name)=>{
  currentMemberId=id;
  prayerTitle.innerText=`🙏 Prayer Requests – ${name}`;
  const snap = await getDoc(doc(db,"members",id));
  const p = snap.data().prayers || [];
  [prayer1,prayer2,prayer3,prayer4,prayer5,prayer6,prayer7]
    .forEach((t,i)=>t.value=p[i]||"");
  prayerModal.style.display="block";
};

// 💾 Save prayer
window.savePrayer = async()=>{
  const prayers=[
    prayer1.value,prayer2.value,prayer3.value,
    prayer4.value,prayer5.value,prayer6.value,prayer7.value
  ];
  await updateDoc(doc(db,"members",currentMemberId),{prayers});
  alert("Prayer saved online 🙏");
};

// UI helpers
window.showAddMember=()=>{
  editMode=false;
  memberName.value="";
  memberRole.value="Member";
  memberModal.style.display="block";
};

window.closeModal=()=>memberModal.style.display="none";
window.closePrayer=()=>prayerModal.style.display="none";


</script>



</body>
</html>

  
